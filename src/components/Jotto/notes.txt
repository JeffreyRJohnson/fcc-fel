
secret word:string  - Word user is guessing     - word from server
success:boolean     - Guessed correctly ?       - false
guessedWords: array - guessedWord:string        - []
                    - letterMatchCount: number
  
  
Congrats and guessed word components
  
Testing with props
  - hand down state from parent
  
Dont need to be connected to Redux
  - never updates state
  
Simple Redux
  - Work with success piece of state
  - Action creator creates CORRECT_GUESS action
  - Reducer updates success
  - Input component conditionally renders

Redux Thunk
  - Action creators that fire off multiple actions
  - guessWord 
    - Add to guessedWords 
    - conditionally update success

Async Action Creators and Axios
 - Test action creator that gets secretWord from server  
  
Redux Props in Connected Components 

    Test state props and action creator props in
    -input
    -App

    Test action creator calls in the components

    
--------------------------------------------------
Summary of Abstractions
  -findByTestAttr() in testUtils.js
  checkProps() in testUtils.js 
  Did not abstract setup()
    - Too different for each component 
  Enzyme adapter config in each test 
  Caution: too many abstractions = hard to read tests 
    -less useful in diagnosing failing tests

--------------------------------------
reducers
  reducers/successReducer.js    
  configureStore.js
  index.tsx (wrapped app in provider)

actions 


---------------------------------------

Success State Planning
  Action creator for CORRECT_GUESS action
  Success reducer
    - Controls success piece of state 
    - Start with value of false 
    - Flip success to true upon CORRECT_GUESS action 

---------------------------------------------

Testing Simple Action Creators 
  Just a function
    - Optional input
    - Output: action object 

  Like testing any other function 
    - Not React specific  

------------------------------------

successReducer Tests
  No action and no state 
    - return default(false)

  CORRECT_GUESS action type 
    - return true

----------------------------------------
Skip action creator / reducer unit testing ?
  
  Only do integration tests on API
    - point of user interaction

  Action creators/reducers are implementation detail  

Tradeoffs for skipping unit tests 

  Benefits
    - Fewer tests to maintain 
    - Less test refactoring when refactoring code 

  Disadvantages
    - Harder to diagnose when tests fail

-------------------------------------
What we did  
  Created a storeFactory utility 
    - Creates a testing store with app reducers 
    - Will eventually add middlewares

  Add it as a prop to our connected component 

  Used shallow to create a virtual DOM 

  Used .dive() to get child component (Input)  


Choice: use actual store, not mock store 

  redux-mock-store can test intermediate actions 
    - such as loading, while waiting for AJAX

  Can't test chnages to state 

  Actual store is closer to app 
    - mocks are always one step removed  

Choice: test with non-connected component ?

    Can export component before it's connected
      - Just the component class 

    Redux testing docs recommend this  

    Enzyme does not recommend this    

Connected vs Non-connected Component

  Connected component
    - Closer to app 
    - Can work with store 

  Non-connected component 
    - Further from app 
    - Can pass mock action creators as props   

---------------------------------------------------
What we did

Action Creator and Reducer 

  Test a simple action creator 
    - Just a function returning an object 

  Test a simple reducer 
    - Just a function that returns state!  

Set up Connected component with Store 

  Enzyme .dive() 
    - Child component from Connected Higher Order Component

  storeFactory 
    - Create a store for each test with app settings


-----------------------------------------------

New action creator: guessWord 

  Function will take a guessedWord string 

  Use a helper function to calculate letterMatchCount

  Create action GUESS_WORD 
    - Payload contains guessedWord and letterMatchCount 

  Reducer will upload guessedWords state  


Two complications

  How will it get secretWord to calculate letter match ?

  What if the word was guessed successfully ?
    - Right place dispatch CORRECT_GUESS to update success state


Enter Redux Thunk 

  Two actions from one creator? Need to access state ?

    - redux-thunk to the rescue

  What is Redux Thunk ?

    More flexibility for action creators

    Return function instead of action 
      Thunk = function that returns a function 

    Can dispatch multiple actions  

    Can access current state 


No longer need correctGuess action creator 

  CORRECT_GUESS will be dispatched from guessWord

  Argument for skipping unit tests on action creators 
    - Some wasted effort on testing correctGuess
    - Don't test implementation details!

  But did learn how to test action creator  


guessedWordsReducer

Control guessedWords piece of state 

Only one action to consider
  - GUESS_WORD

In the challenges, reset feature
  - Need to clear guessedWords  

-----------------------------------------

What can we do with store ?

store.dispatch()
  - takes an action creator 

store.getState()
  - Returns state object 
  - Useful for assertions  

Testing a Thunk 

Create a store with initial state 
  - Will contain secretWord 

Dispatch action creator 
  - store.dispatch(guessWord());

Check state 
  - Use Jest's .toEqual() to test state object as a whole


This is Integration Testing 

  Testing action creators and reducer together 

  Where to put the tests ?
    - make a new file: src/integration.test.js 
    - Would seperate into many files for a larger app

